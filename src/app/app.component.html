<div *ngIf="!isLoggedIn" class="login-container">
  <div class="container-fluid h-100">
    <div class="row h-100">
      <div class="col-md-6 d-none d-md-block image-half"></div>
      <div class="col-md-6 d-flex flex-column justify-content-center align-items-center text-center p-5 form-half">
        <div class="login-box">
          <i class="bi bi-shield-lock-fill display-1 text-primary"></i>
          <h1 class="display-5 fw-bold mt-3">Bienvenido a Argos</h1>
          <p class="fs-4 text-muted">Por favor, inicia sesión para continuar.</p>
          <button (click)="login()" class="btn btn-primary btn-lg mt-4 w-100">
            <i class="bi bi-microsoft"></i> Iniciar Sesión con Microsoft
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<ng-container *ngIf="isLoggedIn">
  <div class="main-container" [class.sidebar-collapsed]="!isSidebarVisible">

    <div class="sidebar">
      <div class="sidebar-header">
        <i class="bi bi-shield-check-fill me-2"></i>
        <span>{{ title }}</span>
      </div>
      <ul class="nav-links">
        <li><a routerLink="/vista1" routerLinkActive="active"><i class="bi bi-house-door-fill"></i><span>Home</span></a></li>
        <li><a routerLink="/demand-projection" routerLinkActive="active"><i class="bi bi-graph-up"></i><span>Demand Projection</span></a></li>
        <li><a routerLink="/ai-suggestions" routerLinkActive="active"><i class="bi bi-lightbulb-fill"></i><span>AI Based Suggestions</span></a></li>
        <li><a routerLink="/notifications" routerLinkActive="active"><i class="bi bi-bell-fill"></i><span>Notifications</span></a></li>
        </ul>
    </div>

    <div class="main-content">
      <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container-fluid">
          <button class="btn btn-outline-primary" (click)="toggleSidebar()">
            <i class="bi bi-list"></i>
          </button>

          <div class="d-flex ms-auto">
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="bi bi-person-circle"></i> {{ userName }}
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" (click)="logout()">
                  <i class="bi bi-box-arrow-right"></i> Cerrar Sesión</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <main class="content-area p-4">
        <router-outlet></router-outlet>
      </main>

    </div>
  </div>
</ng-container>